   
<include file="Public/tpl/left.html" />
<div class="admin_right">
    <include file="Public/tpl/top_userinfo.html" />

    <div class="change_password">绑定资源管理</div>
    <form id="editForm" action="__INDEX__/Camera/editSave">
        <table cellspacing="0" cellpadding="0" class="issue_tab">
            <tr>
                <td width="80">名称</td>
                <td class="issue_td"><input class="name" type="text" name="name" value="{$data.name}" /></td>
            </tr>
            <tr>
                <td>所属班级</td>
                <td>
                    <select name="class_id">
                        <option value="0">请选择</option>
                        <volist name="class_list" id="class">
                            <option value="{$class.id}"<eq name="class.id" value="$data.class_id"> selected="selected"</eq>>{$class.name}</option>
                        </volist>
                    </select>
            </tr>
             <?php if (!empty($data['sourceIds'])) {?>
            <volist name="data.sourceIds" id="sourceId">
            <tr>
                <td>资源&nbsp;&nbsp;</td>
                <td>
                    <select name="sourceIds[]">
                        <option value="0">请选择</option>
                        <volist name="source_list" id="source">
                            <option value="{$source.id}"<eq name="source.id" value="$sourceId"> selected="selected"</eq>>{$source.name}</option>
                        </volist>
                    </select> 
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <span id="addSource"  onclick="addSource(this)" >+</span>&nbsp;&nbsp;
                    <span id="delSource" onclick="removeSource(this)">-</span>
                </td>
            </tr>    
                
            </volist>
            
             <?php } else { ?>
             <tr>
                <td>资源&nbsp;&nbsp;</td>
                <td>
                    <select name="sourceIds[]">
                        <option value="0">请选择</option>
                        <volist name="source_list" id="source">
                            <option value="{$source.id}" >{$source.name}</option>
                        </volist>
                    </select> 
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <span id="addSource"  onclick="addSource(this)" >+</span>&nbsp;&nbsp;
                    <span id="delSource" onclick="removeSource(this)">-</span>
                </td>
            </tr>
             
             <?php }?>
             
            
            
             
            <tr>
                <td></td>
                <td>
                    <a href="__INDEX__/Camera/index" class="fr btn">返回</a>
                    <a href="javascript:void(0)" class="btn fr" id="btn_submit">确定</a>
                </td>
            </tr>
        </table>
        <input type="hidden" name="id" value="{$data.id}" />
    </form>
</div>

<load href="__JS__/jq/form.js" />
<script type="text/javascript">
    function addSource(obj){
        var trs = '<tr><td>资源&nbsp;&nbsp;</td><td><select name="sourceIds[]"><option value="0">请选择</option><volist name="source_list" id="source"><option value="{$source.id}"<eq name="source.id" value="$data.source_id"> selected="selected"</eq>>{$source.name}</option></volist></select> &nbsp;&nbsp;&nbsp;&nbsp;<span id="addSource" onclick="addSource(this)" >+</span>&nbsp;&nbsp;<span id="delSource" onclick="removeSource(this)">-</span></td></tr>';
        $(obj).parent().parent().after(trs);
    }
    function removeSource(obj){
        
        $(obj).parent().parent().remove();
    }
    Poster('camera');
</script>

